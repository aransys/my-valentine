<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Will you be my Valentine?</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: linear-gradient(135deg, #ffd6e8, #e0ccff, #cce6ff);
      --text: #1f2937;
      --soft: #6b7280;
      --pink: #ff4d8d;
    }

    body {
      min-height: 100vh;
      font-family: "Inter", system-ui, sans-serif;
      background: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      overflow: hidden;
      transition: background 0.25s ease;
    }

    body.tapped {
      background: linear-gradient(135deg, #ffe5f0, #e8dcff, #dceeff);
    }

    .app {
      width: 100%;
      max-width: 420px;
      text-align: center;
    }

    .hint {
      font-size: 0.85rem;
      color: var(--soft);
      margin-bottom: 2rem;
      opacity: 0;
      animation: fadeIn 0.6s ease forwards;
    }

    .heart-wrap {
      position: relative;
      margin-bottom: 2.25rem;
      touch-action: manipulation;
      min-height: 140px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .heart {
      font-size: 4rem;
      cursor: pointer;
      user-select: none;
      display: inline-block;
      transition: transform 0.18s ease;
      margin-top: 10px;
    }

    .heart:focus-visible {
      outline: 2px solid var(--pink);
      outline-offset: 4px;
      border-radius: 8px;
    }

    .dots {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 220px;
      height: 220px;
      margin-left: -110px;
      margin-top: -110px;
      pointer-events: none;
    }

    .dot {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(0,0,0,0.2);
      transition: background 0.3s ease;
      transform: translate(-50%, -50%);
    }

    .dot.filled {
      background: var(--pink);
    }

    .message {
      min-height: 2rem;
      font-size: 1.1rem;
      font-weight: 600;
      margin: 1.5rem 0;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .message.show {
      opacity: 1;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }

    .buttons.show {
      opacity: 1;
      pointer-events: auto;
    }

    button {
      border: none;
      padding: 1rem;
      border-radius: 14px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.2s ease;
    }

    button:active {
      transform: scale(0.96);
    }

    button:focus-visible {
      outline: 2px solid var(--pink);
      outline-offset: 3px;
    }

    .yes {
      background: var(--pink);
      color: white;
    }

    .maybe {
      background: rgba(255,255,255,0.6);
    }

    .success {
      position: fixed;
      inset: 0;
      background: #ffedf5;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .success.show {
      opacity: 1;
      pointer-events: auto;
    }

    .success-inner {
      cursor: pointer;
      padding: 1rem;
    }

    .success-title {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      animation: success-pop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .success-sub {
      font-size: 1.1rem;
      color: var(--soft);
    }

    .success-hearts {
      font-size: 2.25rem;
      margin-top: 1rem;
      animation: wiggle 0.5s ease-in-out infinite;
    }

    .success-tap-hint {
      font-size: 0.85rem;
      color: var(--soft);
      margin-top: 0.75rem;
      opacity: 0.8;
    }

    @keyframes success-pop {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes wiggle {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    .replay-btn {
      margin-top: 1.5rem;
    }

    .particle {
      position: fixed;
      font-size: 1.5rem;
      pointer-events: none;
      animation: floatUp 2.5s ease forwards;
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) scale(0.6);
        opacity: 1;
      }
      to {
        transform: translateY(-120vh) scale(1.1);
        opacity: 0;
      }
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="app">
    <p class="hint">tap the heart</p>

    <div class="heart-wrap">
      <div class="heart" id="heart" tabindex="0" role="button" aria-label="Tap the heart">‚ù§Ô∏è</div>
      <div class="dots" id="dots"></div>
    </div>

    <div class="message" id="message"></div>

    <div class="buttons" id="buttons">
      <button class="yes" id="yes">yes duh üíó</button>
      <button class="maybe" id="maybe">i‚Äôm scared üò≠</button>
    </div>
  </div>

  <div class="success" id="success">
    <div class="success-inner" id="successInner">
      <h1 class="success-title" id="successTitle">ok wow</h1>
      <p class="success-sub" id="successSub">that was a yes</p>
      <div class="success-hearts" aria-hidden="true">üíû üò≠ ü´∂ üíó ‚ú®</div>
      <p class="success-tap-hint" id="successTapHint">tap for more hearts üíó</p>
      <button class="yes replay-btn" id="replay" type="button">play again</button>
    </div>
  </div>

  <script>
    const heart = document.getElementById("heart");
    const message = document.getElementById("message");
    const dotsWrap = document.getElementById("dots");
    const buttons = document.getElementById("buttons");
    const yesBtn = document.getElementById("yes");
    const maybeBtn = document.getElementById("maybe");
    const success = document.getElementById("success");
    const successInner = document.getElementById("successInner");
    const successTitle = document.getElementById("successTitle");
    const successSub = document.getElementById("successSub");
    const replayBtn = document.getElementById("replay");

    const messages = [
      "hey",
      "okay wait",
      "why is this cute",
      "don‚Äôt stop",
      "omg",
      "okay that was kinda cute",
      "stoppp",
      "why is this working",
      "no seriously",
      "don't stop now",
      "keep going",
      "i'm weak",
      "omg omg",
      "WAIT",
      "okay yeah",
      "fine you win"
    ];

    const maybeTexts = [
      "idk‚Ä¶",
      "don't look at me",
      "wait",
      "okay fine"
    ];

    const MAYBE_GIVE_IN = 3;

    const successHeadlines = [
      "ok wow",
      "let's gooo",
      "yes!!!",
      "we're doing this üíó",
      "omg okay",
      "i'm so happy"
    ];

    const successSublines = [
      "that was a yes",
      "u said yes",
      "valentine mode: on",
      "best answer ever"
    ];

    const successMaybeSublines = [
      "that was a yes (eventually üíó)",
      "okay fine that's a yes",
      "knew u'd come around"
    ];

    let taps = 0;
    let maybeClicks = 0;

    // Heart shape: parametric curve, 16 points around the heart
    function heartPoint(i, n) {
      const t = (i / n) * 2 * Math.PI;
      const x = 16 * Math.pow(Math.sin(t), 3);
      const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
      return { x: x * 5.5, y: y * 5.5 };
    }

    // create dots in heart shape
    messages.forEach((_, i) => {
      const dot = document.createElement("div");
      dot.className = "dot";
      const { x, y } = heartPoint(i, messages.length);
      dot.style.left = `calc(50% + ${x}px)`;
      dot.style.top = `calc(50% + ${y}px)`;
      dotsWrap.appendChild(dot);
    });

    function squish() {
      const rot = (Math.random() * 12 - 6).toFixed(1);
      heart.style.transform = `scale(0.92) rotate(${rot}deg)`;
      setTimeout(() => {
        heart.style.transform = `scale(1.08) rotate(${rot}deg)`;
      }, 70);
      setTimeout(() => {
        heart.style.transform = `scale(1) rotate(0deg)`;
      }, 140);
    }

    function particle() {
      const p = document.createElement("div");
      p.className = "particle";
      p.textContent = ["üíó","üíû","ü´∂","üò≠"][Math.floor(Math.random()*4)];
      p.style.left = Math.random() * window.innerWidth + "px";
      p.style.bottom = "-20px";
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 2500);
    }

    function handleHeartTap() {
      document.body.classList.add("tapped");
      setTimeout(() => document.body.classList.remove("tapped"), 250);
      squish();
      particle();

      if (taps >= messages.length) return;

      message.textContent = messages[taps];
      message.classList.add("show");

      dotsWrap.children[taps].classList.add("filled");

      taps++;

      if (taps === messages.length) {
        setTimeout(() => buttons.classList.add("show"), 400);
      }
    }

    heart.addEventListener("click", handleHeartTap);
    heart.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        handleHeartTap();
      }
    });

    function showSuccess(fromMaybe = false) {
      successTitle.textContent = successHeadlines[Math.floor(Math.random() * successHeadlines.length)];
      successSub.textContent = fromMaybe
        ? successMaybeSublines[Math.floor(Math.random() * successMaybeSublines.length)]
        : successSublines[Math.floor(Math.random() * successSublines.length)];
      success.classList.add("show");
      for (let i = 0; i < 25; i++) {
        setTimeout(particle, i * 80);
      }
    }

    yesBtn.addEventListener("click", () => showSuccess(false));

    successInner.addEventListener("click", (e) => {
      if (e.target.closest("#replay")) return;
      for (let i = 0; i < 5; i++) setTimeout(() => particle(), i * 40);
    });

    function yesAfterMaybe() {
      showSuccess(false);
    }

    function handleMaybeClick() {
      maybeClicks++;
      if (maybeClicks >= MAYBE_GIVE_IN) {
        maybeBtn.textContent = "yes duh üíó";
        maybeBtn.classList.add("yes");
        maybeBtn.classList.remove("maybe");
        maybeBtn.removeEventListener("click", handleMaybeClick);
        maybeBtn.addEventListener("click", yesAfterMaybe);
        showSuccess(true);
        return;
      }
      maybeBtn.textContent = maybeTexts[Math.min(maybeClicks - 1, maybeTexts.length - 1)];
      maybeBtn.style.transform = `translateX(${Math.random()*12 - 6}px)`;
    }

    maybeBtn.addEventListener("click", handleMaybeClick);

    replayBtn.addEventListener("click", () => {
      success.classList.remove("show");
      buttons.classList.remove("show");
      message.classList.remove("show");
      message.textContent = "";
      taps = 0;
      maybeClicks = 0;
      heart.style.transform = "scale(1) rotate(0deg)";
      maybeBtn.textContent = "i'm scared üò≠";
      maybeBtn.classList.remove("yes");
      maybeBtn.classList.add("maybe");
      maybeBtn.style.transform = "";
      maybeBtn.removeEventListener("click", yesAfterMaybe);
      maybeBtn.addEventListener("click", handleMaybeClick);
      for (const dot of dotsWrap.children) {
        dot.classList.remove("filled");
      }
    });
  </script>
</body>
</html>